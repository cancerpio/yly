# UX Improve: Single Page Integration (Final Version)

## 變更摘要
本文件記錄了將 Lyrics Yomi 整合為「單一頁面、單一輸入框」的最終 UI 與功能邏輯。
核心目標是移除繁瑣的步驟（如切換頁面、點擊開始分析），達成「所見即所得」的流暢體驗。

### 核心功能

1.  **單一編輯區 (Unified Editor)**：
    *   移除原本的 Textarea 與 Preview 分離設計。
    *   採用 **`div contenteditable="true"`** 作為核心互動元件。
    *   支援純文字貼上、編輯，以及**直接圈選文字**進行分析。
    *   解決了 `<textarea>` 無法取得精確選取座標的問題。

2.  **智慧自動辨識 (Auto-identify)**：
    *   **觸發時機**：當編輯區內容變動停止後 1.5 秒 (Debounce)。
    *   **辨識來源**：iTunes Search API。
    *   **標題格式**：自動更新為 **`歌名 (歌手)`** (例如: `Lemon (Kenshi Yonezu)`)。
    *   **UI 回饋**：標題輸入框右側顯示 Loading Spinner，完成後自動填入。

3.  **即時翻譯互動**：
    *   **操作**：在編輯區圈選任意文字。
    *   **回饋**：右下角彈出「翻譯這段」按鈕 (FAB)。
    *   **結果**：點擊後顯示包含原文、讀音、翻譯的 Tooltip，並可加入收藏。

### UI 設計規範 (UI Specs)

1.  **Header 區域**：
    *   **App Title**：`1.2rem`, `Font-Weight: 800`, **Primary Green Color**。置中排列。
    *   **提示訊息 (Tip)**：綠色系背景 (`bg-green-100`, `text-green-600`)，位於標題與輸入框之間。
    *   **標題輸入框 (Title Input)**：
        *   樣式：圓角 `8px`，背景透明或微白。
        *   Focus 狀態：**無黑色底線**，改為柔和的背景色變化 (`rgba(0,0,0,0.03)`)，符合 Apple UI 風格。
        *   Icon 位置：右側預留 `12px` padding，避免貼齊邊緣。

2.  **編輯區域 (.editor-area)**：
    *   樣式：白色半透明玻璃質感，圓角 `16px`。
    *   排版：`box-sizing: border-box`，確保寬度 100% 填滿且不溢出。
    *   對齊：文字靠左對齊 (`text-align: left`)，避免受父層置中影響。

## 測試案例 (Test Cases)

### Case 1: 貼上歌詞與自動辨識
**步驟**：
1. 進入首頁，清空舊內容。
2. 貼上歌詞 (例如 "Lemon" 的歌詞)。
3. 當作一般筆記本進行微調或編輯。
**預期結果**：
- 在停止輸入約 1.5 秒後，標題欄位右側 Icon 轉為 Spinner。
- 標題欄位自動填入 `Lemon (米津玄師)` (或其他對應結果)。

### Case 2: 圈選翻譯
**步驟**：
1. 在編輯區內圈選一段歌詞。
2. 觀察右下角。
**預期結果**：
- 右下角彈出「翻譯這段」按鈕。
- 點擊按鈕後，翻譯 Tooltip 準確顯示在選取文字上方 (或中央)。
- 點擊 "Add to List" 可成功收藏，並使用該首歌名歸檔。

### Case 3: 標題手動修改
**步驟**：
1. 自動辨識出歌名。
2. 手動點擊標題輸入框，修改歌名。
**預期結果**：
- 輸入框 Focus 時無突兀黑框。
- 修改後的標題不會被自動辨識覆蓋 (除非歌詞內容再次發生大幅變動)。
